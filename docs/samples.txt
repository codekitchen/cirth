#!/usr/bin/env jtlang

library = import. "test"

constructor = { |f|
  { |leftargs(f.leftargs);rightargs(f.rightargs)|
    s = library.object.new.;
    *(leftargs) f. s *(rightargs);
    library.object.seal. s;
    s;
  }
}

Employee = constructor. { |s a b|
  "an employee object";
  s.a = a;
  s.check_a = { 3 };
}};

emp = Employee. 1 2;

print. emp.a;
print. emp.check_a.;

ackermann := { |m n|
  "calculate the ackermann function";
  if? (m ==. 0) {
    n +. 1;
  } { if? (n ==. 0) {
    ackermann. (m -. 1) 1;
  } {
    ackermann. (m -. 1) ackermann. m n -. 1;
  }
}

print. ackermann. 4 2;
